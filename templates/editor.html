{% extends "base.html" %}

{% block title %}Editor â€” bundledb.json{% endblock %}

{% block content %}
<div style="display: flex; align-items: center; margin-top: -1.25rem; margin-bottom: 1.25rem">
    <a href="/" class="btn-nav">Back to Social Posting</a>
    <h2 style="margin: 0; flex: 1; text-align: center; font-family: var(--font-body)">Editing bundledb</h2>
    <div style="display: flex; gap: 0.5rem;">
        <button type="button" id="btn-run-latest" class="btn-action" style="margin-bottom: 0; padding: 0.4rem 1rem; font-size: 0.85rem;">Run Latest</button>
        <button type="button" id="btn-deploy" class="btn-action" style="margin-bottom: 0; padding: 0.4rem 1rem; font-size: 0.85rem;">Deploy</button>
    </div>
</div>
<div class="editor-container">

    <!-- Mode selector -->
    <fieldset id="mode-selector">
        <legend>Mode</legend>
        <label><input type="radio" name="editor-mode" value="edit" checked> Edit</label>
        <label><input type="radio" name="editor-mode" value="create"> Create</label>
    </fieldset>

    <!-- Type selector -->
    <fieldset id="type-selector">
        <legend>Type</legend>
        <label><input type="radio" name="item-type" value="blog post"> Blog Post</label>
        <label><input type="radio" name="item-type" value="site"> Site</label>
        <label><input type="radio" name="item-type" value="release"> Release</label>
        <label><input type="radio" name="item-type" value="starter"> Starter</label>
    </fieldset>

    <!-- Search -->
    <fieldset id="search-section" style="display:none;">
        <legend>Search</legend>
        <input type="text" id="search-input" placeholder="Enter search term...">
    </fieldset>

    <!-- Recent items -->
    <div id="recent-items" class="item-list" style="display:none;">
        <h3 class="list-heading">Recent</h3>
        <div id="recent-items-list"></div>
    </div>

    <!-- Search results -->
    <div id="search-results" class="item-list" style="display:none;">
        <h3 class="list-heading">Results</h3>
        <div id="search-results-list"></div>
    </div>

    <!-- Edit form -->
    <div id="edit-form-container" style="display:none;">
        <fieldset>
            <legend id="edit-form-title">Edit Item</legend>
            <div id="edit-form-fields"></div>
            <div class="edit-actions">
                <button type="button" id="btn-save" class="btn-action">Save</button>
                <button type="button" id="btn-save-end" class="btn-action">Save &amp; Run Latest</button>
                <button type="button" id="btn-save-deploy" class="btn-action">Save &amp; Deploy</button>
                <button type="button" id="btn-cancel" class="btn-action btn-secondary">Cancel</button>
            </div>
        </fieldset>
    </div>

    <!-- Status message -->
    <div id="status-message" style="display:none;"></div>

</div>

<!-- Deploy output modal -->
<div id="deploy-modal" class="deploy-modal-overlay" style="display:none;">
    <div class="deploy-modal">
        <h3 id="deploy-modal-title">Deploy Output</h3>
        <pre id="deploy-modal-output" class="deploy-modal-output"></pre>
        <button type="button" id="deploy-modal-ok" class="btn-action">Ok</button>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/fuse.js@7.0.0"></script>
<script src="{{ url_for('static', filename='js/editor.js') }}"></script>
{% endblock %}
